(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{3587:function(e,t,r){Promise.resolve().then(r.bind(r,4147))},4147:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),o=r(6463),s=r(3580),d=r(4380),u=r(3850),a=r(1940);function i(){let[e,{isLoading:t}]=(0,d.JK)(),[r,{isLoading:i}]=(0,d.oU)(),c=(0,o.useSearchParams)(),{value:l,setValue:m}=(0,u.Z)(300),x=(0,o.useRouter)(),h=e=>{e.target.value&&e.target.nextElementSibling?e.target.nextElementSibling.focus():(null==e?void 0:e.target.value)&&"Enter"===e.key&&e.target.nextElementSibling&&e.target.nextElementSibling.focus(),"Backspace"===e.key&&e.target.previousElementSibling&&e.target.previousElementSibling.focus()},b=async t=>{var r,n,o,d,u;t.preventDefault();let a=Object.fromEntries(new FormData(t.target).entries()),i=[a.code1,a.code2,a.code3,a.code4].join("");if(!i)return s.Am.error("Code is required");let c=await e({code:i});(null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.success)?(x.push("/login"),t.target.reset(),s.Am.success(null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.message)):s.Am.error(null==c?void 0:null===(u=c.error)||void 0===u?void 0:null===(d=u.data)||void 0===d?void 0:null===(o=d.error)||void 0===o?void 0:o.message)},f=async()=>{var e,t,n,o,d;let u=await r({email:c.get("email")});(null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.success)?(m(300),s.Am.success(null==u?void 0:null===(t=u.data)||void 0===t?void 0:t.message)):s.Am.error(null==u?void 0:null===(d=u.error)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:null===(n=o.error)||void 0===n?void 0:n.message)};return(0,n.jsx)("section",{className:"  bg-white py-16  dark:bg-[#151f32]  dark:text-[#cacfd5]",children:(0,n.jsx)("div",{className:" ",children:(0,n.jsx)("div",{className:"content-body     p-4 dark:border-zinc-700 border-zinc-300",children:(0,n.jsxs)("div",{className:" max-w-[460px] mx-auto h-fit  rounded-md dark:bg-[#182c49] bg-[#eceff1]",children:[(0,n.jsx)("div",{className:"content-header border-b p-4 dark:border-zinc-700 border-zinc-300",children:(0,n.jsx)("h1",{className:"text-[#3c4046] dark:text-[#cdd6e2] font-bold text-xl text-center",children:"Enter Security Code"})}),(0,n.jsxs)("div",{className:"content-body text-center   text-[#3c4046]  p-4 dark:border-zinc-700 border-zinc-300 dark:text-[#cdd6e2]",children:[(0,n.jsx)("p",{children:"Four digit security code sent to your Email."}),(0,n.jsx)("p",{className:"pt-2 flex justify-center",children:l?(0,n.jsxs)("span",{children:["Code Expired in : \xa0 ",l]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"text-red-500",children:"Expired!"})})}),(0,n.jsxs)("form",{className:"pb-1 pt-4  ",onSubmit:b,children:[(0,n.jsxs)("div",{className:"flex justify-between px-4 ",children:[(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code1",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:h}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code2",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:h}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code3",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:h}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code4",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:h})]}),(0,n.jsxs)("div",{className:"modal-action  pt-3 px-4 text-right",children:[!l&&(0,n.jsx)("span",{className:"h-11 flex justify-center  items-center text-white py-1 px-2 cursor-pointer z-10 rounded-sm bg-blue-600 text-sm",onClick:f,children:i?(0,n.jsx)(a.Z,{}):"resend code"}),(0,n.jsx)("button",{type:"submit",className:"h-11 flex justify-center items-center  px-3 hover:bg-[#1068f5] rounded-md   z-10 text-white bg-[#0c51d2] ",children:t?(0,n.jsx)(a.Z,{}):"SUBMIT"})]})]})]})]})})})})}},1940:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437);function o(){return(0,n.jsx)("span",{className:"h-6 w-6 rounded-full border-[3px] animate-spin border-dashed border-slate-300 dark:border-slate-200"})}},3850:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2265);function o(e){let{initial:t=300}=e,[r,o]=(0,n.useState)(t);return(0,n.useEffect)(()=>{if(r>0){let e=setTimeout(()=>{o(r-1)},1e3);return()=>clearTimeout(e)}},[r]),{value:r,setValue:o}}},4380:function(e,t,r){"use strict";r.d(t,{EW:function(){return u},FZ:function(){return d},JK:function(){return n},SE:function(){return s},Tr:function(){return a},UE:function(){return m},Wf:function(){return c},Zz:function(){return o},oU:function(){return l},x8:function(){return h},x_:function(){return i}});let{useAccountActivationMutation:n,useAuthLoginMutation:o,useAuthLogoutMutation:s,useAuthRegisterMutation:d,useFindAccountMutation:u,useLoggedInUserQuery:a,usePasswordResetMutation:i,usePasswordResetCodeSendMutation:c,useResendActivationCodeMutation:l,useUpdateUserDataMutation:m,useUpdateUserPasswordMutation:x,useUpdateUserPhotoMutation:h}=r(8619).G.injectEndpoints({endpoints:e=>({authRegister:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:e})}),loggedInUser:e.query({query:()=>({url:"/auth/me",method:"GET"}),providesTags:["User"]}),authLogin:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e}),providesTags:["User"]}),authLogout:e.mutation({query:()=>({url:"/auth/logout",method:"POST",body:{}}),invalidatesTags:["User"]}),resendActivationCode:e.mutation({query:e=>({url:"/auth/resend-active-code",method:"POST",body:e})}),accountActivation:e.mutation({query:e=>({url:"/auth/activate",method:"POST",body:e})}),findAccount:e.mutation({query:e=>({url:"/users/forgot-password",method:"POST",body:e})}),passwordResetCodeSend:e.mutation({query:e=>({url:"/users/resend-password-reset-code",method:"POST",body:e})}),passwordReset:e.mutation({query:e=>({url:"/users/reset-password",method:"POST",body:e})}),updateUserData:e.mutation({query:e=>({url:"/users/".concat(e.id),method:"PATCH",body:e}),invalidatesTags:["User"]}),updateUserPassword:e.mutation({query:e=>({url:"/auth/users/password-update",method:"PATCH",body:e})}),updateUserPhoto:e.mutation({query:e=>({url:"/users/".concat(e.get("userId")),method:"PATCH",body:e}),invalidatesTags:["User"]})})})},8619:function(e,t,r){"use strict";r.d(t,{G:function(){return s}});var n=r(8507),o=r(6074);let s=(0,n.LC)({reducerPath:"authApi",baseQuery:(0,o.ni)({baseUrl:"".concat("https://server.kinsust.org","/api/v1"),credentials:"include"}),tagTypes:["Auth","User"],endpoints:()=>({})})},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[8507,3580,2971,7023,1744],function(){return e(e.s=3587)}),_N_E=e.O()}]);