(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{3587:function(e,t,r){Promise.resolve().then(r.bind(r,4147))},4147:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),o=r(6463),s=r(3580),a=r(4380),d=r(3850),u=r(1940);function i(){let[e,{isLoading:t}]=(0,a.JK)(),[r,{isLoading:i}]=(0,a.oU)(),c=(0,o.useSearchParams)(),{value:l,setValue:m}=(0,d.Z)(300),h=(0,o.useRouter)(),x=e=>{e.target.value&&e.target.nextElementSibling?e.target.nextElementSibling.focus():(null==e?void 0:e.target.value)&&"Enter"===e.key&&e.target.nextElementSibling&&e.target.nextElementSibling.focus(),"Backspace"===e.key&&e.target.previousElementSibling&&e.target.previousElementSibling.focus()},b=async t=>{var r,n,o,a,d;t.preventDefault();let u=Object.fromEntries(new FormData(t.target).entries()),i=[u.code1,u.code2,u.code3,u.code4].join("");if(!i)return s.Am.error("Code is required");let c=await e({code:i});(null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.success)?(h.push("/login"),t.target.reset(),s.Am.success(null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.message)):s.Am.error(null==c?void 0:null===(d=c.error)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)},f=async()=>{var e,t,n,o,a;let d=await r({email:c.get("email")});(null==d?void 0:null===(e=d.data)||void 0===e?void 0:e.success)?(m(300),s.Am.success(null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.message)):s.Am.error(null==d?void 0:null===(a=d.error)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:null===(n=o.error)||void 0===n?void 0:n.message)};return(0,n.jsx)("section",{className:"  bg-white py-16  dark:bg-[#151f32]  dark:text-[#cacfd5]",children:(0,n.jsx)("div",{className:" ",children:(0,n.jsx)("div",{className:"content-body     p-4 dark:border-zinc-700 border-zinc-300",children:(0,n.jsxs)("div",{className:" max-w-[460px] mx-auto h-fit  rounded-md dark:bg-[#182c49] bg-[#eceff1]",children:[(0,n.jsx)("div",{className:"content-header border-b p-4 dark:border-zinc-700 border-zinc-300",children:(0,n.jsx)("h1",{className:"text-[#3c4046] dark:text-[#cdd6e2] font-bold text-xl text-center",children:"Enter Security Code"})}),(0,n.jsxs)("div",{className:"content-body text-center   text-[#3c4046]  p-4 dark:border-zinc-700 border-zinc-300 dark:text-[#cdd6e2]",children:[(0,n.jsx)("p",{children:"Four digit security code sent to your Email."}),(0,n.jsx)("p",{className:"pt-2 flex justify-center",children:l?(0,n.jsxs)("span",{children:["Code Expired in : \xa0 ",l]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"text-red-500",children:"Expired!"})})}),(0,n.jsxs)("form",{className:"pb-1 pt-4  ",onSubmit:b,children:[(0,n.jsxs)("div",{className:"flex justify-between px-4 ",children:[(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code1",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:x}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code2",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:x}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code3",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:x}),(0,n.jsx)("input",{type:"text",maxLength:"1",name:"code4",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:x})]}),(0,n.jsxs)("div",{className:"modal-action  pt-3 px-4 text-right",children:[!l&&(0,n.jsx)("span",{className:"h-11 flex justify-center  items-center text-white py-1 px-2 cursor-pointer z-10 rounded-sm bg-blue-600 text-sm",onClick:f,children:i?(0,n.jsx)(u.Z,{}):"resend code"}),(0,n.jsx)("button",{type:"submit",className:"h-11 flex justify-center items-center  px-3 hover:bg-[#1068f5] rounded-md   z-10 text-white bg-[#0c51d2] ",children:t?(0,n.jsx)(u.Z,{}):"SUBMIT"})]})]})]})]})})})})}},1940:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437);function o(){return(0,n.jsx)("span",{className:"h-6 w-6 rounded-full border-[3px] animate-spin border-dashed border-slate-300 dark:border-slate-200"})}},3850:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2265);function o(e){let{initial:t=300}=e,[r,o]=(0,n.useState)(t);return(0,n.useEffect)(()=>{if(r>0){let e=setTimeout(()=>{o(r-1)},1e3);return()=>clearTimeout(e)}},[r]),{value:r,setValue:o}}},4380:function(e,t,r){"use strict";r.d(t,{EW:function(){return u},FZ:function(){return d},JK:function(){return o},SE:function(){return a},Tr:function(){return i},UE:function(){return h},Wf:function(){return l},Zz:function(){return s},oU:function(){return m},x8:function(){return b},x_:function(){return c}});var n=r(8619);let{useAccountActivationMutation:o,useAuthLoginMutation:s,useAuthLogoutMutation:a,useAuthRegisterMutation:d,useFindAccountMutation:u,useLoggedInUserQuery:i,usePasswordResetMutation:c,usePasswordResetCodeSendMutation:l,useResendActivationCodeMutation:m,useUpdateUserDataMutation:h,useUpdateUserPasswordMutation:x,useUpdateUserPhotoMutation:b}=n.Gb.injectEndpoints({endpoints:e=>({authRegister:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:e})}),loggedInUser:e.query({query:()=>({url:"/auth/me",method:"GET"}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,n.av)(e))}catch(e){}},providesTags:["User"]}),authLogin:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,n.av)(e))}catch(e){}},invalidatesTags:["Auth"]}),authLogout:e.mutation({query:()=>({url:"/auth/logout",method:"POST",body:{}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,n.pn)())}catch(e){}},invalidatesTags:["User","Auth"]}),resendActivationCode:e.mutation({query:e=>({url:"/auth/resend-active-code",method:"POST",body:e})}),accountActivation:e.mutation({query:e=>({url:"/auth/activate",method:"POST",body:e})}),findAccount:e.mutation({query:e=>({url:"/users/forgot-password",method:"POST",body:e})}),passwordResetCodeSend:e.mutation({query:e=>({url:"/users/resend-password-reset-code",method:"POST",body:e})}),passwordReset:e.mutation({query:e=>({url:"/users/reset-password",method:"POST",body:e})}),updateUserData:e.mutation({query:e=>({url:"/users/".concat(e.id),method:"PATCH",body:e}),invalidatesTags:["User"]}),updateUserPassword:e.mutation({query:e=>({url:"/auth/users/password-update",method:"PATCH",body:e})}),updateUserPhoto:e.mutation({query:e=>({url:"/users/".concat(e.get("userId")),method:"PATCH",body:e}),invalidatesTags:["User"]})})})},8619:function(e,t,r){"use strict";r.d(t,{Gb:function(){return a},av:function(){return u},pn:function(){return i}});var n=r(8507),o=r(6074),s=r(2351);let a=(0,n.LC)({reducerPath:"authApi",baseQuery:(0,o.ni)({baseUrl:"".concat("https://server.kinsust.org","/api/v1"),credentials:"include"}),tagTypes:["Auth","User"],endpoints:()=>({})}),d=(0,s.oM)({name:"logged",initialState:{user:null,isAuthenticated:!1},reducers:{setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0},clearUser:e=>{e.user=null,e.isAuthenticated=!1}}}),{setUser:u,clearUser:i,setLoading:c,setError:l}=d.actions;t.ZP=d.reducer},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[8507,3580,2971,7023,1744],function(){return e(e.s=3587)}),_N_E=e.O()}]);