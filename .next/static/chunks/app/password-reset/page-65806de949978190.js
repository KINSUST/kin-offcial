(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5178],{7004:function(e,t,r){Promise.resolve().then(r.bind(r,8301))},8301:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(7437),o=r(2265),a=r(6463),n=r(3580),d=r(4380),u=r(3850);function i(){let[e]=(0,d.x_)(),[t]=(0,d.Wf)(),r=(0,a.useSearchParams)(),i=(0,a.useRouter)(),[c,l]=(0,o.useState)({password:"",con_password:""}),{value:h,setValue:m}=(0,u.Z)(10),[x,f]=(0,o.useState)(""),p=e=>{l(t=>({...t,[e.target.name]:e.target.value}))},g=async()=>{var t,s,o,a,d;let{password:u,con_password:l}=c;if(!u||!l)return n.Am.error("All field are required!");if(u.length<6)return n.Am.error("Password must be 6 characters");if(u!==l)return n.Am.error("Password not match");if(x.length<4)return n.Am.error("Code must be 4  digit");let h=await e({email:r.get("email"),password:c.password,code:x});(null==h?void 0:null===(t=h.data)||void 0===t?void 0:t.success)?(i.push("/login"),n.Am.success(null==h?void 0:null===(s=h.data)||void 0===s?void 0:s.message)):n.Am.error(null==h?void 0:null===(d=h.error)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)},[v,b]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!1),k=async()=>{var e,s,o,a,d;let u=await t({email:r.get("email")});(null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.success)?(m(300),n.Am.success(null==u?void 0:null===(s=u.data)||void 0===s?void 0:s.message)):n.Am.error(null==u?void 0:null===(d=u.error)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)};return(0,s.jsx)("section",{className:"  bg-white py-16 dark:bg-[#151f32]  dark:text-[#cacfd5]",children:(0,s.jsx)("div",{className:" ",children:(0,s.jsx)("div",{className:"content-body     p-4 border-zinc-700",children:(0,s.jsxs)("div",{className:" max-w-[460px] mx-auto  h-fit  rounded-md dark:bg-[#182c49] bg-[#eceff1]",children:[(0,s.jsxs)("div",{className:"content-header border-b p-4 dark:border-zinc-700 border-zinc-300",children:[(0,s.jsx)("h1",{className:"text-[#3c4046] dark:text-[#cdd6e2] font-bold text-xl text-center",children:"Password Change"}),(0,s.jsx)("p",{className:"text-center py-2 text-slate-700 dark:text-slate-200",children:"A verification code sent to your email."}),h?(0,s.jsxs)("p",{className:"text-center text-slate-700 dark:text-slate-200",children:["Code Expired in ",h]}):(0,s.jsxs)("div",{className:"flex justify-center  gap-6 items-center",children:[(0,s.jsx)("span",{className:"text-red-500",children:"Expired!"})," \xa0 \xa0 \xa0 \xa0",(0,s.jsx)("span",{className:"flex items-center py-1 px-2 text-white cursor-pointer rounded-sm bg-blue-500 hover:bg-blue-600 text-sm",onClick:k,children:"resend code"})]})]}),(0,s.jsxs)("div",{className:"content-body  text-[#3c4046]  p-4 border-zinc-700 dark:text-[#cdd6e2]",children:[(0,s.jsx)("div",{className:"py-3",children:(0,s.jsx)("input",{type:"text",placeholder:"Security code",name:"code",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8]  rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-5 focus:outline-none  text-3xl text-center ".concat(x&&"tracking-[60px]"),max:"4",maxLength:"4",onChange:e=>{f(e.target.value)},value:x})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:v?"text":"password",name:"password",value:c.password,placeholder:"Enter new password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:p}),(0,s.jsx)("span",{className:"absolute top-3 right-4  cursor-pointer",onClick:()=>{v?b(!1):b(!0)},children:c.password&&(v?(0,s.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z"})}):(0,s.jsxs)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",className:"dark:text-white",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"}),(0,s.jsx)("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"})]}))})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:w?"text":"password",placeholder:"Confirm password",value:c.con_password,name:"con_password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:p}),(0,s.jsx)("span",{className:"absolute top-3 right-4 cursor-pointer",onClick:()=>{w?y(!1):y(!0)},children:c.con_password&&(w?(0,s.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z"})}):(0,s.jsxs)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"}),(0,s.jsx)("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"})]}))})]})]}),(0,s.jsx)("div",{className:"content-footer p-4 text-right flex",children:(0,s.jsx)("button",{className:"w-full z-10 text-[#ffffff] font-bold bg-[#9a7ff0] hover:bg-[#7161eb]  focus:outline-none focus:ring-0  rounded-lg text-sm   px-5 py-2.5 text-center",onClick:g,children:"UPDATE"})})]})})})})}},3850:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265);function o(e){let{initial:t=300}=e,[r,o]=(0,s.useState)(t);return(0,s.useEffect)(()=>{if(r>0){let e=setTimeout(()=>{o(r-1)},1e3);return()=>clearTimeout(e)}},[r]),{value:r,setValue:o}}},4380:function(e,t,r){"use strict";r.d(t,{EW:function(){return u},FZ:function(){return d},JK:function(){return o},SE:function(){return n},Tr:function(){return i},UE:function(){return m},Wf:function(){return l},Zz:function(){return a},oU:function(){return h},x8:function(){return f},x_:function(){return c}});var s=r(8619);let{useAccountActivationMutation:o,useAuthLoginMutation:a,useAuthLogoutMutation:n,useAuthRegisterMutation:d,useFindAccountMutation:u,useLoggedInUserQuery:i,usePasswordResetMutation:c,usePasswordResetCodeSendMutation:l,useResendActivationCodeMutation:h,useUpdateUserDataMutation:m,useUpdateUserPasswordMutation:x,useUpdateUserPhotoMutation:f}=s.Gb.injectEndpoints({endpoints:e=>({authRegister:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:e})}),loggedInUser:e.query({query:()=>({url:"/auth/me",method:"GET"}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,s.av)(e))}catch(e){}},providesTags:["User"]}),authLogin:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,s.av)(e))}catch(e){}},invalidatesTags:["Auth"]}),authLogout:e.mutation({query:()=>({url:"/auth/logout",method:"POST",body:{}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:o}=t;try{let{data:e}=await o;r((0,s.pn)())}catch(e){}},invalidatesTags:["User","Auth"]}),resendActivationCode:e.mutation({query:e=>({url:"/auth/resend-active-code",method:"POST",body:e})}),accountActivation:e.mutation({query:e=>({url:"/auth/activate",method:"POST",body:e})}),findAccount:e.mutation({query:e=>({url:"/users/forgot-password",method:"POST",body:e})}),passwordResetCodeSend:e.mutation({query:e=>({url:"/users/resend-password-reset-code",method:"POST",body:e})}),passwordReset:e.mutation({query:e=>({url:"/users/reset-password",method:"POST",body:e})}),updateUserData:e.mutation({query:e=>({url:"/users/".concat(e.id),method:"PATCH",body:e}),invalidatesTags:["User"]}),updateUserPassword:e.mutation({query:e=>({url:"/auth/users/password-update",method:"PATCH",body:e})}),updateUserPhoto:e.mutation({query:e=>({url:"/users/".concat(e.get("userId")),method:"PATCH",body:e}),invalidatesTags:["User"]})})})},8619:function(e,t,r){"use strict";r.d(t,{Gb:function(){return n},av:function(){return u},pn:function(){return i}});var s=r(8507),o=r(6074),a=r(2351);let n=(0,s.LC)({reducerPath:"authApi",baseQuery:(0,o.ni)({baseUrl:"".concat("https://server.kinsust.org","/api/v1"),credentials:"include"}),tagTypes:["Auth","User"],endpoints:()=>({})}),d=(0,a.oM)({name:"logged",initialState:{user:null,isAuthenticated:!1},reducers:{setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0},clearUser:e=>{e.user=null,e.isAuthenticated=!1}}}),{setUser:u,clearUser:i,setLoading:c,setError:l}=d.actions;t.ZP=d.reducer},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[8507,3580,2971,7023,1744],function(){return e(e.s=7004)}),_N_E=e.O()}]);